<a href="https://modx.pro/assets/images/tickets/7802/65bd01c402ffdcba0868424c4c7d3ada53ab8d0d.png" title="Рабочий стол 1_058.png" rel="fancybox">
    <img src="https://modx.pro/assets/images/tickets/7802/65bd01c402ffdcba0868424c4c7d3ada53ab8d0d.png" class="center">
</a>

Это такой тип ТВ поля, в который можно вбивать значения "на ходу". Другими словами, мы не указываем "Возможные значения" при редактировании ТВ, а вбиваем эти значения в это поле на странице редактирования ресурса.

Очень удобно создавать из такого поля "Теги" на сайте, потому что помимо добавления значений "на ходу", у нас есть возможность выбрать уже используемые значения из других ресурсов.

<h3>Сниппет tvssResources</h3>
Выводит ресурсы по тегу/тегам. Сниппет отдаёт все параметры в <b>pdoFetch</b>, поэтому можно указывать любые параметры <b>pdoTools</b>. Понимает <b>Fenom</b>, может работать с <b>pdoPage</b>.
<b>Пример</b> выборки ресурсов с тегами "tag1", "tag2", "tag3" прописанными в TV с ID 17 или 19:
<code>{$_modx->runSnippet('pdoPage', [
    'element' => 'tvssResources',
    'tv' => '17,19',
    'tag' => 'tag1||tag2||tag3',
    'parents' => 0,
    'tpl' => '@INLINE <div>{$id} - {$pagetitle}</div>',
])}
{$_modx->getPlaceholder('page.nav')}</code>
<i>Теги можно указать, как параметром в сниппет, так и в GET запросе в параметре tag. Сниппет перебивает указанный тег в GET запросе.</i>

<h3>Сниппет tvssTickets</h3>
Выводит тикеты компонента <b>Tickets</b> по тегу/тегам. Отдаёт все параметры в <b>getTickets</b>, поэтому можно указывать любые доступные параметры <b>getTickets</b>.
<b>Пример</b> выборки тикетов с тегами "tag1", "tag2", "tag3" прописанными в TV с ID 17 или 19:
<code>{$_modx->runSnippet('pdoPage', [
    'element' => 'tvssTickets',
    'tv' => '17,19',
    'tag' => 'tag1||tag2||tag3',
    'parents' => 0,
])}
{$_modx->getPlaceholder('page.nav')}</code>
<i>Теги можно указать, как параметром в сниппет, так и в GET запросе в параметре tag. Сниппет перебивает указанный тег в GET запросе.</i>

<h3>Сниппет tvssTags</h3>
Выводит список тегов ресурса.
<b>Пример</b> вывода всех тегов из ТВ поля 17, указанных в текущем ресурсе. В ссылке тега формируется УРЛ для ресурса 2, на котором располагается сниппет <b>tvssResources</b>:
<code>{$_modx->runSnippet('tvssTags', [
    'id' => $_modx->resource.id,
    'tv' => 17,
    'pageId' => 2,
])}</code>
<i>В список параметров также входит: tpl, tplWrapper, outputSeparator, toPlaceholder.</i>

<h3>Инструкция по созданию тегов на сайте</h3>
<i>Внимание! Инструкция описана с использованием <b>Fenom</b>. Если на Вашем сайте он не используется <s>по религиозным соображениям</s>, то придётся самостоятельно переделать весь код из примеров на стандартный синтаксис.</i>
<ol>
    <li>
После установки компонента создаём новое ТВ с типом <b>tvSuperSelect</b>. Запоминаем ID ТВшки. В нашем случае - <b>2</b>.
    </li>
    <li>
Создаём ресурс "<b>Ресурсы с тегом</b>". Запоминаем ID ресурса. В нашем случае - <b>2</b>.
В <b>longtitle</b> прописываем:
<code>Ресурсы с тегом{$.get['tag'] ? ' «'~($.get['tag']|unescape:"url")~'»' : ''}</code>
<ul>
    <li>
Контент для вывода <b>списка ресурсов</b>:
<code>{if $.get['tag']?}
    <div id="pdopage">
        <div class="rows">
            {$_modx->runSnippet('pdoPage', [
                'element' => 'tvssResources',
                'tv' => '2',
                'parents' => 0,
                'ajaxMode' => 'default',
                'tpl' => '@INLINE <div>{$id} - {$pagetitle}</div>',
            ]) ?: 'Ресурсов по данному тегу не найдено'}
        </div>
        {$_modx->getPlaceholder('page.nav')}
    </div>
{else}
    Укажите тег для выборки документов
{/if}</code>
    </li>
    <li>
Контент для вывода <b>списка тикетов</b>:
<code>{if $.get['tag']?}
    <div id="pdopage">
        <div class="rows">
            {$_modx->runSnippet('pdoPage', [
                'element' => 'tvssTickets',
                'tv' => '2',
                'parents' => 0,
                'ajaxMode' => 'default',
            ]) ?: 'Тикетов по данному тегу не найдено'}
        </div>
        {$_modx->getPlaceholder('page.nav')}
    </div>
{else}
    Укажите тег для выборки документов
{/if}</code>
    </li>
</ul>
    </li>
    <li>
В шаблоне (или чанке), в котором у Вас выводится <u>полная</u> статья или тикет, указываем вывод списка тегов:
<code>{$_modx->runSnippet('tvssTags', [
    'id' => $_modx->resource.id,
    'tv' => 2,
    'pageId' => 2,
])}</code>
    </li>
</ol>

<h3>Инструкция по выводу похожих статей с помощью тегов</h3>
<ul>
    <li>
<h4>Похожие ресурсы</h4>
<b>Fenom:</b>
<code>{$_modx->runSnippet('tvssResources', [
    'tv' => '2',
    'tags' => $_modx->runSnippet('tvssTags', ['id' => $_modx->resource.id, 'tv' => '2', 'tpl' => '@INLINE [[+tag]]', 'outputSeparator' => '||']),
    'parents' => 0,
    'limit' => 4,
]) ?: 'Похожих записей не найдено'}</code>
<b>Стандартный синтаксис:</b>
<code>[[tvssResources:empty=`Похожих записей не найдено`?
    &tv=`2`
    &tags=`[[tvssTags?id=`[[*id]]`&tv=`2`&tpl=`@INLINE [[+tag]]`&outputSeparator=`||`]]`
    &parents=`0`
    &limit=`4`
]]</code>
<p></p>
    </li>
    <li>
<h4>Похожие тикеты</h4>
<b>Fenom:</b>
<code>{$_modx->runSnippet('tvssTickets', [
    'tv' => '2',
    'tags' => $_modx->runSnippet('tvssTags', ['id' => $_modx->resource.id, 'tv' => '2', 'tpl' => '@INLINE [[+tag]]', 'outputSeparator' => '||']),
    'parents' => 0,
    'limit' => 4,
]) ?: 'Похожих записей не найдено'}</code>
<b>Стандартный синтаксис:</b>
<code>[[tvssTickets:empty=`Похожих записей не найдено`?
    &tv=`2`
    &tags=`[[tvssTags?id=`[[*id]]`&tv=`2`&tpl=`@INLINE [[+tag]]`&outputSeparator=`||`]]`
    &parents=`0`
    &limit=`4`
]]</code>
    </li>
</ul>

<h4>Немного подробнее о хранении значений в базе</h4>
<ol>
<li>У данного ТВ поля есть своя таблица <b>tvss_options</b>, в ней данные хранятся в таком виде:
<a href="https://modx.pro/assets/images/tickets/7802/044782fa2bf8442501154e47d354bf38a3ee28da.png" title="Выделение_056.png" rel="fancybox">
    <img src="https://modx.pro/assets/images/tickets/7802/044782fa2bf8442501154e47d354bf38a3ee28da.png" class="center">
</a>
</li>
<li>
Однако, данные также хранятся и в таблице <b>site_tmplvar_contentvalues</b>, но уже в виде JSON массива:
<a href="https://modx.pro/assets/images/tickets/7802/33c331bc2d51c8e39c3ea7a2278a0b64494881fc.png" title="Выделение_057.png" rel="fancybox">
    <img src="https://modx.pro/assets/images/tickets/7802/33c331bc2d51c8e39c3ea7a2278a0b64494881fc.png" class="center">
</a>
</li>
</ol>

<i>Первое сделано для удобной фильтрации, второе - для простого вывода.</i>

Обсуждение компонента в <a href="https://modx.pro/components/7802-tvsuperselect-tv-type-auto-complete-box-list-from-ms2-to-implement-the-tags/">сообществе MODX.PRO</a>.
